import{S as U,i as X,s as G,a4 as O,K as at,e as et,L as rt,m as w,h,n as d,b as B,E as g,a5 as A,a6 as T,a7 as j,g as M,d as S,q as L,r as N,u as W,k,a as Y,l as E,c as F,Q as D,v as mt,f as ht,F as st,y as ft,z as ct,A as ut,B as _t,D as V,R as K,aa as Z,p as R,T as dt,G as lt,ak as vt,al as gt,P as yt}from"./index.c94b45ae.js";import{S as pt,i as q,h as wt,z as Q}from"./idb.08f9e68f.js";import{w as bt}from"./index.88854e64.js";function nt(t){let e,l;return{c(){e=at("title"),l=L(t[0])},l(n){e=rt(n,"title",{});var s=w(e);l=N(s,t[0]),s.forEach(h)},m(n,s){B(n,e,s),g(e,l)},p(n,s){s&1&&W(l,n[0])},d(n){n&&h(e)}}}function kt(t){let e,l,n,s=t[0]&&nt(t);const i=t[3].default,r=O(i,t,t[2],null);return{c(){e=at("svg"),s&&s.c(),l=et(),r&&r.c(),this.h()},l(o){e=rt(o,"svg",{xmlns:!0,viewBox:!0,class:!0});var u=w(e);s&&s.l(u),l=et(),r&&r.l(u),u.forEach(h),this.h()},h(){d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"viewBox",t[1]),d(e,"class","svelte-c8tyih")},m(o,u){B(o,e,u),s&&s.m(e,null),g(e,l),r&&r.m(e,null),n=!0},p(o,[u]){o[0]?s?s.p(o,u):(s=nt(o),s.c(),s.m(e,l)):s&&(s.d(1),s=null),r&&r.p&&(!n||u&4)&&A(r,i,o,o[2],n?j(i,o[2],u,null):T(o[2]),null),(!n||u&2)&&d(e,"viewBox",o[1])},i(o){n||(M(r,o),n=!0)},o(o){S(r,o),n=!1},d(o){o&&h(e),s&&s.d(),r&&r.d(o)}}}function Et(t,e,l){let{$$slots:n={},$$scope:s}=e,{title:i=null}=e,{viewBox:r}=e;return t.$$set=o=>{"title"in o&&l(0,i=o.title),"viewBox"in o&&l(1,r=o.viewBox),"$$scope"in o&&l(2,s=o.$$scope)},[i,r,s,n]}class Yt extends U{constructor(e){super(),X(this,e,Et,kt,G,{title:0,viewBox:1})}}const Ct=t=>({}),it=t=>({});function Dt(t){let e;const l=t[9]["custom-tip"],n=O(l,t,t[8],it);return{c(){n&&n.c()},l(s){n&&n.l(s)},m(s,i){n&&n.m(s,i),e=!0},p(s,i){n&&n.p&&(!e||i&256)&&A(n,l,s,s[8],e?j(l,s[8],i,Ct):T(s[8]),it)},i(s){e||(M(n,s),e=!0)},o(s){S(n,s),e=!1},d(s){n&&n.d(s)}}}function It(t){let e,l;return{c(){e=k("div"),l=L(t[0]),this.h()},l(n){e=E(n,"DIV",{class:!0,style:!0});var s=w(e);l=N(s,t[0]),s.forEach(h),this.h()},h(){d(e,"class","default-tip svelte-16glvw6"),d(e,"style",t[6])},m(n,s){B(n,e,s),g(e,l)},p(n,s){s&1&&W(l,n[0])},i:st,o:st,d(n){n&&h(e)}}}function Mt(t){let e,l,n,s,i,r,o;const u=t[9].default,c=O(u,t,t[8],null),m=[It,Dt],a=[];function v(f,_){return f[0]?0:1}return i=v(t),r=a[i]=m[i](t),{c(){e=k("div"),l=k("span"),c&&c.c(),n=Y(),s=k("div"),r.c(),this.h()},l(f){e=E(f,"DIV",{class:!0});var _=w(e);l=E(_,"SPAN",{class:!0});var y=w(l);c&&c.l(y),y.forEach(h),n=F(_),s=E(_,"DIV",{class:!0});var C=w(s);r.l(C),C.forEach(h),_.forEach(h),this.h()},h(){d(l,"class","tooltip-slot svelte-16glvw6"),d(s,"class","tooltip svelte-16glvw6"),D(s,"active",t[5]),D(s,"left",t[4]),D(s,"right",t[2]),D(s,"bottom",t[3]),D(s,"top",t[1]),d(e,"class","tooltip-wrapper svelte-16glvw6")},m(f,_){B(f,e,_),g(e,l),c&&c.m(l,null),g(e,n),g(e,s),a[i].m(s,null),o=!0},p(f,[_]){c&&c.p&&(!o||_&256)&&A(c,u,f,f[8],o?j(u,f[8],_,null):T(f[8]),null);let y=i;i=v(f),i===y?a[i].p(f,_):(mt(),S(a[y],1,1,()=>{a[y]=null}),ht(),r=a[i],r?r.p(f,_):(r=a[i]=m[i](f),r.c()),M(r,1),r.m(s,null)),(!o||_&32)&&D(s,"active",f[5]),(!o||_&16)&&D(s,"left",f[4]),(!o||_&4)&&D(s,"right",f[2]),(!o||_&8)&&D(s,"bottom",f[3]),(!o||_&2)&&D(s,"top",f[1])},i(f){o||(M(c,f),M(r),o=!0)},o(f){S(c,f),S(r),o=!1},d(f){f&&h(e),c&&c.d(f),a[i].d()}}}function St(t,e,l){let{$$slots:n={},$$scope:s}=e,{tip:i=""}=e,{top:r=!1}=e,{right:o=!1}=e,{bottom:u=!1}=e,{left:c=!1}=e,{active:m=!1}=e,{color:a="#757575"}=e,v=`background-color: ${a};`;return t.$$set=f=>{"tip"in f&&l(0,i=f.tip),"top"in f&&l(1,r=f.top),"right"in f&&l(2,o=f.right),"bottom"in f&&l(3,u=f.bottom),"left"in f&&l(4,c=f.left),"active"in f&&l(5,m=f.active),"color"in f&&l(7,a=f.color),"$$scope"in f&&l(8,s=f.$$scope)},[i,r,o,u,c,m,v,a,s,n]}class qt extends U{constructor(e){super(),X(this,e,St,Mt,G,{tip:0,top:1,right:2,bottom:3,left:4,active:5,color:7})}}function zt(t){let e,l,n,s,i,r,o;const u=t[6].default,c=O(u,t,t[7],null);return{c(){e=k("div"),l=k("span"),c&&c.c(),this.h()},l(m){e=E(m,"DIV",{class:!0,style:!0});var a=w(e);l=E(a,"SPAN",{class:!0});var v=w(l);c&&c.l(v),v.forEach(h),a.forEach(h),this.h()},h(){d(l,"class",n=V(`${t[3]?"activated":""} icon`)+" svelte-tkoizy"),d(e,"class",s=V(`icon-button ${t[4]}`)+" svelte-tkoizy"),d(e,"style",t[2])},m(m,a){B(m,e,a),g(e,l),c&&c.m(l,null),i=!0,r||(o=K(e,"click",function(){Z(t[1])&&t[1].apply(this,arguments)}),r=!0)},p(m,a){t=m,c&&c.p&&(!i||a&128)&&A(c,u,t,t[7],i?j(u,t[7],a,null):T(t[7]),null),(!i||a&8&&n!==(n=V(`${t[3]?"activated":""} icon`)+" svelte-tkoizy"))&&d(l,"class",n),(!i||a&16&&s!==(s=V(`icon-button ${t[4]}`)+" svelte-tkoizy"))&&d(e,"class",s),(!i||a&4)&&d(e,"style",t[2])},i(m){i||(M(c,m),i=!0)},o(m){S(c,m),i=!1},d(m){m&&h(e),c&&c.d(m),r=!1,o()}}}function Bt(t){let e,l,n;return l=new qt({props:{tip:t[0],top:t[5]==="top",right:t[5]==="right",bottom:t[5]==="bottom",$$slots:{default:[zt]},$$scope:{ctx:t}}}),{c(){e=k("div"),ft(l.$$.fragment),this.h()},l(s){e=E(s,"DIV",{class:!0});var i=w(e);ct(l.$$.fragment,i),i.forEach(h),this.h()},h(){d(e,"class","main svelte-tkoizy")},m(s,i){B(s,e,i),ut(l,e,null),n=!0},p(s,[i]){const r={};i&1&&(r.tip=s[0]),i&32&&(r.top=s[5]==="top"),i&32&&(r.right=s[5]==="right"),i&32&&(r.bottom=s[5]==="bottom"),i&158&&(r.$$scope={dirty:i,ctx:s}),l.$set(r)},i(s){n||(M(l.$$.fragment,s),n=!0)},o(s){S(l.$$.fragment,s),n=!1},d(s){s&&h(e),_t(l)}}}function Pt(t,e,l){let{$$slots:n={},$$scope:s}=e,{tooltip:i=void 0}=e,{onClick:r=()=>{}}=e,{style:o=""}=e,{activated:u=!1}=e,{size:c="medium"}=e,{direction:m="top"}=e;return t.$$set=a=>{"tooltip"in a&&l(0,i=a.tooltip),"onClick"in a&&l(1,r=a.onClick),"style"in a&&l(2,o=a.style),"activated"in a&&l(3,u=a.activated),"size"in a&&l(4,c=a.size),"direction"in a&&l(5,m=a.direction),"$$scope"in a&&l(7,s=a.$$scope)},[i,r,o,u,c,m,n,s]}class Ft extends U{constructor(e){super(),X(this,e,Pt,Bt,G,{tooltip:0,onClick:1,style:2,activated:3,size:4,direction:5})}}function Vt(t){let e,l,n,s,i,r,o,u,c,m,a,v,f,_,y,C;o=new pt({});const z=t[7].default,p=O(z,t,t[6],null);return{c(){e=k("div"),l=k("div"),n=k("div"),s=k("div"),i=L(t[0]),r=Y(),ft(o.$$.fragment),u=Y(),c=k("div"),m=L("X"),a=Y(),v=k("div"),p&&p.c(),this.h()},l(b){e=E(b,"DIV",{class:!0});var I=w(e);l=E(I,"DIV",{class:!0});var H=w(l);n=E(H,"DIV",{style:!0});var P=w(n);s=E(P,"DIV",{class:!0});var x=w(s);i=N(x,t[0]),x.forEach(h),r=F(P),ct(o.$$.fragment,P),u=F(P),c=E(P,"DIV",{class:!0});var $=w(c);m=N($,"X"),$.forEach(h),P.forEach(h),a=F(H),v=E(H,"DIV",{class:!0});var tt=w(v);p&&p.l(tt),tt.forEach(h),H.forEach(h),I.forEach(h),this.h()},h(){d(s,"class","title svelte-rhyomq"),d(c,"class","close-button svelte-rhyomq"),R(n,"display","flex"),R(n,"margin-bottom","10px"),R(n,"height","25px"),d(v,"class","content svelte-rhyomq"),d(l,"class","inner-item svelte-rhyomq"),d(e,"class",f=V(`Popup ${t[1]?"opened":""}`)+" svelte-rhyomq")},m(b,I){B(b,e,I),g(e,l),g(l,n),g(n,s),g(s,i),g(n,r),ut(o,n,null),g(n,u),g(n,c),g(c,m),g(l,a),g(l,v),p&&p.m(v,null),_=!0,y||(C=[K(c,"click",function(){Z(t[2])&&t[2].apply(this,arguments)}),K(e,"mousedown",t[3]),K(e,"keydown",t[4])],y=!0)},p(b,[I]){t=b,(!_||I&1)&&W(i,t[0]),p&&p.p&&(!_||I&64)&&A(p,z,t,t[6],_?j(z,t[6],I,null):T(t[6]),null),(!_||I&2&&f!==(f=V(`Popup ${t[1]?"opened":""}`)+" svelte-rhyomq"))&&d(e,"class",f)},i(b){_||(M(o.$$.fragment,b),M(p,b),_=!0)},o(b){S(o.$$.fragment,b),S(p,b),_=!1},d(b){b&&h(e),_t(o),p&&p.d(b),y=!1,dt(C)}}}function Ot(t,e,l){let{$$slots:n={},$$scope:s}=e,{title:i=""}=e,{isOpen:r=!1}=e,{onClose:o=()=>{}}=e,{onEnter:u=()=>{}}=e;const c=a=>{a.target===a.currentTarget&&o()},m=a=>{a.key==="Enter"&&u(),a.key==="Escape"&&o()};return t.$$set=a=>{"title"in a&&l(0,i=a.title),"isOpen"in a&&l(1,r=a.isOpen),"onClose"in a&&l(2,o=a.onClose),"onEnter"in a&&l(5,u=a.onEnter),"$$scope"in a&&l(6,s=a.$$scope)},[i,r,o,c,m,u,s,n]}class Kt extends U{constructor(e){super(),X(this,e,Ot,Vt,G,{title:0,isOpen:1,onClose:2,onEnter:5})}}function At(t){const e=t-1;return e*e*e+1}function Lt(t,{from:e,to:l},n={}){const s=getComputedStyle(t),i=s.transform==="none"?"":s.transform,[r,o]=s.transformOrigin.split(" ").map(parseFloat),u=e.left+e.width*r/l.width-(l.left+r),c=e.top+e.height*o/l.height-(l.top+o),{delay:m=0,duration:a=f=>Math.sqrt(f)*120,easing:v=At}=n;return{delay:m,duration:Z(a)?a(Math.sqrt(u*u+c*c)):a,easing:v,css:(f,_)=>{const y=_*u,C=_*c,z=f+_*e.width/l.width,p=f+_*e.height/l.height;return`transform: ${i} translate(${y}px, ${C}px) scale(${z}, ${p});`}}}function ot(t){return Object.prototype.toString.call(t)==="[object Date]"}function J(t,e){if(t===e||t!==t)return()=>t;const l=typeof t;if(l!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const n=e.map((s,i)=>J(t[i],s));return s=>n.map(i=>i(s))}if(l==="object"){if(!t||!e)throw new Error("Object cannot be null");if(ot(t)&&ot(e)){t=t.getTime(),e=e.getTime();const i=e-t;return r=>new Date(t+r*i)}const n=Object.keys(e),s={};return n.forEach(i=>{s[i]=J(t[i],e[i])}),i=>{const r={};return n.forEach(o=>{r[o]=s[o](i)}),r}}if(l==="number"){const n=e-t;return s=>t+s*n}throw new Error(`Cannot interpolate ${l} values`)}function Nt(t,e={}){const l=bt(t);let n,s=t;function i(r,o){if(t==null)return l.set(t=r),Promise.resolve();s=r;let u=n,c=!1,{delay:m=0,duration:a=400,easing:v=yt,interpolate:f=J}=lt(lt({},e),o);if(a===0)return u&&(u.abort(),u=null),l.set(t=s),Promise.resolve();const _=vt()+m;let y;return n=gt(C=>{if(C<_)return!0;c||(y=f(t,r),typeof a=="function"&&(a=a(t,r)),c=!0),u&&(u.abort(),u=null);const z=C-_;return z>a?(l.set(t=r),!1):(l.set(t=y(v(z/a))),!0)}),n.promise}return{set:i,update:(r,o)=>i(r(s,t),o),subscribe:l.subscribe}}const Ut=async()=>{await q.systemInfo.put({name:"lastUpdated",value:wt().format("YYYY-MM-DD")})},Xt=async t=>{await q.settings.put({name:"shortHeightMode",value:t})},Gt=async t=>{await q.settings.put({name:"showCharacterPreview",value:t})},Qt=async t=>{await q.settings.put({name:"showMemo",value:t})},Rt=async t=>{await q.settings.put({name:"memo",value:t})},Jt=Q(async()=>{var t;return(t=await q.settings.get("showCharacterPreview"))==null?void 0:t.value}),Wt=Q(async()=>{var t;return(t=await q.settings.get("shortHeightMode"))==null?void 0:t.value}),Zt=Q(async()=>{var t;return((t=await q.settings.get("showMemo"))==null?void 0:t.value)??!1}),xt=Q(async()=>{var t;return((t=await q.settings.get("memo"))==null?void 0:t.value)??""});export{Yt as I,Kt as M,Ft as a,Jt as b,At as c,Zt as d,Xt as e,Lt as f,Gt as g,Qt as h,xt as i,Rt as j,Wt as l,Nt as t,Ut as u};
