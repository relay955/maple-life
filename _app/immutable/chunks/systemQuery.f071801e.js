import{S as H,i as O,s as W,a4 as V,k as b,a as U,l as y,m as M,h as v,c as F,n as g,Q as p,b as E,E as C,a5 as z,a6 as D,a7 as P,v as L,d as k,f as Q,g as S,q as R,r as G,u as J,F as A,y as K,z as X,A as Z,B as x,D as q,R as $,ae as Y}from"./index.942381d5.js";import{w as tt}from"./index.f3aeeb80.js";import{i as m,h as et,z as I}from"./idb.218ef653.js";const st=t=>({}),B=t=>({});function at(t){let e;const a=t[9]["custom-tip"],i=V(a,t,t[8],B);return{c(){i&&i.c()},l(s){i&&i.l(s)},m(s,o){i&&i.m(s,o),e=!0},p(s,o){i&&i.p&&(!e||o&256)&&z(i,a,s,s[8],e?P(a,s[8],o,st):D(s[8]),B)},i(s){e||(S(i,s),e=!0)},o(s){k(i,s),e=!1},d(s){i&&i.d(s)}}}function lt(t){let e,a;return{c(){e=b("div"),a=R(t[0]),this.h()},l(i){e=y(i,"DIV",{class:!0,style:!0});var s=M(e);a=G(s,t[0]),s.forEach(v),this.h()},h(){g(e,"class","default-tip svelte-16glvw6"),g(e,"style",t[6])},m(i,s){E(i,e,s),C(e,a)},p(i,s){s&1&&J(a,i[0])},i:A,o:A,d(i){i&&v(e)}}}function nt(t){let e,a,i,s,o,f,d;const h=t[9].default,l=V(h,t,t[8],null),u=[lt,at],r=[];function c(n,_){return n[0]?0:1}return o=c(t),f=r[o]=u[o](t),{c(){e=b("div"),a=b("span"),l&&l.c(),i=U(),s=b("div"),f.c(),this.h()},l(n){e=y(n,"DIV",{class:!0});var _=M(e);a=y(_,"SPAN",{class:!0});var w=M(a);l&&l.l(w),w.forEach(v),i=F(_),s=y(_,"DIV",{class:!0});var T=M(s);f.l(T),T.forEach(v),_.forEach(v),this.h()},h(){g(a,"class","tooltip-slot svelte-16glvw6"),g(s,"class","tooltip svelte-16glvw6"),p(s,"active",t[5]),p(s,"left",t[4]),p(s,"right",t[2]),p(s,"bottom",t[3]),p(s,"top",t[1]),g(e,"class","tooltip-wrapper svelte-16glvw6")},m(n,_){E(n,e,_),C(e,a),l&&l.m(a,null),C(e,i),C(e,s),r[o].m(s,null),d=!0},p(n,[_]){l&&l.p&&(!d||_&256)&&z(l,h,n,n[8],d?P(h,n[8],_,null):D(n[8]),null);let w=o;o=c(n),o===w?r[o].p(n,_):(L(),k(r[w],1,1,()=>{r[w]=null}),Q(),f=r[o],f?f.p(n,_):(f=r[o]=u[o](n),f.c()),S(f,1),f.m(s,null)),(!d||_&32)&&p(s,"active",n[5]),(!d||_&16)&&p(s,"left",n[4]),(!d||_&4)&&p(s,"right",n[2]),(!d||_&8)&&p(s,"bottom",n[3]),(!d||_&2)&&p(s,"top",n[1])},i(n){d||(S(l,n),S(f),d=!0)},o(n){k(l,n),k(f),d=!1},d(n){n&&v(e),l&&l.d(n),r[o].d()}}}function ot(t,e,a){let{$$slots:i={},$$scope:s}=e,{tip:o=""}=e,{top:f=!1}=e,{right:d=!1}=e,{bottom:h=!1}=e,{left:l=!1}=e,{active:u=!1}=e,{color:r="#757575"}=e,c=`background-color: ${r};`;return t.$$set=n=>{"tip"in n&&a(0,o=n.tip),"top"in n&&a(1,f=n.top),"right"in n&&a(2,d=n.right),"bottom"in n&&a(3,h=n.bottom),"left"in n&&a(4,l=n.left),"active"in n&&a(5,u=n.active),"color"in n&&a(7,r=n.color),"$$scope"in n&&a(8,s=n.$$scope)},[o,f,d,h,l,u,c,r,s,i]}class it extends H{constructor(e){super(),O(this,e,ot,nt,W,{tip:0,top:1,right:2,bottom:3,left:4,active:5,color:7})}}function ct(t){let e,a,i,s,o,f,d;const h=t[7].default,l=V(h,t,t[8],null);return{c(){e=b("button"),a=b("span"),l&&l.c(),this.h()},l(u){e=y(u,"BUTTON",{class:!0,style:!0});var r=M(e);a=y(r,"SPAN",{class:!0});var c=M(a);l&&l.l(c),c.forEach(v),r.forEach(v),this.h()},h(){g(a,"class",i=q(`${t[3]?"activated":""} icon`)+" svelte-2po7wy"),g(e,"class",s=q(`icon-button ${t[5]} ${t[4]?"selected":""}`)+" svelte-2po7wy"),g(e,"style",t[2])},m(u,r){E(u,e,r),C(e,a),l&&l.m(a,null),o=!0,f||(d=$(e,"click",function(){Y(t[1])&&t[1].apply(this,arguments)}),f=!0)},p(u,r){t=u,l&&l.p&&(!o||r&256)&&z(l,h,t,t[8],o?P(h,t[8],r,null):D(t[8]),null),(!o||r&8&&i!==(i=q(`${t[3]?"activated":""} icon`)+" svelte-2po7wy"))&&g(a,"class",i),(!o||r&48&&s!==(s=q(`icon-button ${t[5]} ${t[4]?"selected":""}`)+" svelte-2po7wy"))&&g(e,"class",s),(!o||r&4)&&g(e,"style",t[2])},i(u){o||(S(l,u),o=!0)},o(u){k(l,u),o=!1},d(u){u&&v(e),l&&l.d(u),f=!1,d()}}}function rt(t){let e,a,i;return a=new it({props:{tip:t[0],top:t[6]==="top",right:t[6]==="right",bottom:t[6]==="bottom",$$slots:{default:[ct]},$$scope:{ctx:t}}}),{c(){e=b("div"),K(a.$$.fragment),this.h()},l(s){e=y(s,"DIV",{class:!0});var o=M(e);X(a.$$.fragment,o),o.forEach(v),this.h()},h(){g(e,"class","main svelte-2po7wy")},m(s,o){E(s,e,o),Z(a,e,null),i=!0},p(s,[o]){const f={};o&1&&(f.tip=s[0]),o&64&&(f.top=s[6]==="top"),o&64&&(f.right=s[6]==="right"),o&64&&(f.bottom=s[6]==="bottom"),o&318&&(f.$$scope={dirty:o,ctx:s}),a.$set(f)},i(s){i||(S(a.$$.fragment,s),i=!0)},o(s){k(a.$$.fragment,s),i=!1},d(s){s&&v(e),x(a)}}}function ut(t,e,a){let{$$slots:i={},$$scope:s}=e,{tooltip:o=void 0}=e,{onClick:f=()=>{}}=e,{style:d=""}=e,{activated:h=!1}=e,{selected:l=!1}=e,{size:u="medium"}=e,{direction:r="top"}=e;return t.$$set=c=>{"tooltip"in c&&a(0,o=c.tooltip),"onClick"in c&&a(1,f=c.onClick),"style"in c&&a(2,d=c.style),"activated"in c&&a(3,h=c.activated),"selected"in c&&a(4,l=c.selected),"size"in c&&a(5,u=c.size),"direction"in c&&a(6,r=c.direction),"$$scope"in c&&a(8,s=c.$$scope)},[o,f,d,h,l,u,r,i,s]}class vt extends H{constructor(e){super(),O(this,e,ut,rt,W,{tooltip:0,onClick:1,style:2,activated:3,selected:4,size:5,direction:6})}}function ft(t){const e=t-1;return e*e*e+1}function pt(t,{from:e,to:a},i={}){const s=getComputedStyle(t),o=s.transform==="none"?"":s.transform,[f,d]=s.transformOrigin.split(" ").map(parseFloat),h=e.left+e.width*f/a.width-(a.left+f),l=e.top+e.height*d/a.height-(a.top+d),{delay:u=0,duration:r=n=>Math.sqrt(n)*120,easing:c=ft}=i;return{delay:u,duration:Y(r)?r(Math.sqrt(h*h+l*l)):r,easing:c,css:(n,_)=>{const w=_*h,T=_*l,j=n+_*e.width/a.width,N=n+_*e.height/a.height;return`transform: ${o} translate(${w}px, ${T}px) scale(${j}, ${N});`}}}const _t={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}};function dt(){const{subscribe:t,update:e}=tt(new Array),a={};let i=0;function s(l){return l instanceof Object}function o(l="default",u={}){return a[l]=u,a}function f(l,u){const r={target:"default",...s(l)?l:{...u,msg:l}},c=a[r.target]||{},n={..._t,...c,...r,theme:{...c.theme,...r.theme},classes:[...c.classes||[],...r.classes||[]],id:++i};return e(_=>n.reversed?[..._,n]:[n,..._]),i}function d(l){e(u=>{if(!u.length||l===0)return[];if(typeof l=="function")return u.filter(c=>l(c));if(s(l))return u.filter(c=>c.target!==l.target);const r=l||Math.max(...u.map(c=>c.id));return u.filter(c=>c.id!==r)})}function h(l,u){const r=s(l)?l:{...u,id:l};e(c=>{const n=c.findIndex(_=>_.id===r.id);return n>-1&&(c[n]={...c[n],...r}),c})}return{subscribe:t,push:f,pop:d,set:h,_init:o}}const wt=dt();const bt=async()=>{await m.systemInfo.put({name:"lastUpdated",value:et().format("YYYY-MM-DD")})},yt=async t=>{await m.settings.put({name:"shortHeightMode",value:t})},Mt=async t=>{await m.settings.put({name:"showCharacterPreview",value:t})},kt=async t=>{await m.settings.put({name:"showMemo",value:t})},St=async t=>{await m.settings.put({name:"memo",value:t})},It=async t=>{await m.settings.put({name:"selectedWorldId",value:t})},Ct=async t=>{await m.settings.put({name:"characterTabViewMode",value:t})},Tt=I(async()=>{var t;return(t=await m.settings.get("showCharacterPreview"))==null?void 0:t.value}),qt=I(async()=>{var t;return(t=await m.settings.get("shortHeightMode"))==null?void 0:t.value}),Et=I(async()=>{var t;return((t=await m.settings.get("showMemo"))==null?void 0:t.value)??!1}),Vt=I(async()=>{var t;return((t=await m.settings.get("memo"))==null?void 0:t.value)??""}),zt=I(async()=>{var t;return((t=await m.settings.get("selectedWorldId"))==null?void 0:t.value)??1}),Dt=I(async()=>{var t;return((t=await m.settings.get("characterTabViewMode"))==null?void 0:t.value)??"card"});export{vt as I,it as S,It as a,Ct as b,ft as c,Dt as d,qt as e,pt as f,Tt as g,Et as h,yt as i,Mt as j,kt as k,zt as l,Vt as m,St as n,wt as t,bt as u};
